(function(){"use strict";var t={2192:function(t,e,n){var o=n(5328),i=n(8464),a=n(6760);const s={id:"app"};function r(t,e,n,o,i,r){const c=(0,a.E1)("router-view");return(0,a.Wz)(),(0,a.An)("div",s,[(0,a.K2)(c)])}n(3248),n(2168),n(5104),n(8312);const c=(0,i.O6)("auth",{state:()=>({isAuthenticated:!1,accessToken:"",userData:{},loading:!1}),actions:{initializeAccessToken(){const t=localStorage.getItem("accessToken"),e=localStorage.getItem("userData");this.accessToken=t||"",this.isAuthenticated=!!t,this.userData=e?JSON.parse(e):{}},login(t){this.$patch((e=>{e.accessToken=t,e.isAuthenticated=!0})),localStorage.setItem("accessToken",t)},setUserData(t){this.userData=t,localStorage.setItem("userData",JSON.stringify(t))},setLoading(t){this.loading=t}},getters:{isLoading(){return this.loading},getUserData(){return this.userData}}});const l="d9e20d499a3894452cdd",u="bb31e83cd0fff1cf60db4305e8b9ef3f168f41b4";async function d(t){try{const e=await fetch("/api/access_token",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({client_id:l,client_secret:u,code:t})});if(!e.ok)throw new Error("Failed to fetch access token");const n=await e.json();return n.access_token}catch(e){throw console.error("Error fetching access token:",e),e}}var f=n(5216),g={name:"App",setup(){const t=c(),e=(0,f.KX)();async function n(){try{const n=new URLSearchParams(window.location.search).get("code"),o=await d(n);t.login(o),e.push("/")}catch(n){console.log("Error fetching access token:",n)}}return(0,a.u2)((()=>{t.initializeAccessToken(),window.location.search.includes("code")&&n()})),{}}},p=n(8152);const m=(0,p.c)(g,[["render",r]]);var h=m,v=n(8752);const b=t=>((0,a.ED)("data-v-abc25492"),t=t(),(0,a.ii)(),t),y={key:0},D={key:1,class:"gistList"},w={class:"container mx-auto md:px-20 md:py-8 px-10 py-4"},k={class:"gistList__header flex items-center"},C=b((()=>(0,a.QD)("h2",null,"All gists",-1))),A={key:0,class:"counter rounded-full w-6 h-6 flex justify-center items-center ml-2"},z={class:"text-white"},E={class:"actions"},x={class:"flex flex-col md:flex-row justify-between py-2"},W={class:"pt-2"},L={class:"flex gap-5"};function Q(t,e,n,o,i,s){const r=(0,a.E1)("PageLoader"),c=(0,a.E1)("TopBar"),l=(0,a.E1)("router-link"),u=(0,a.E1)("IconButton");return(0,a.Wz)(),(0,a.An)("div",null,[o.isLoading?((0,a.Wz)(),(0,a.An)("div",y,[(0,a.K2)(r)])):((0,a.Wz)(),(0,a.An)("div",D,[(0,a.K2)(c),(0,a.QD)("div",w,[(0,a.QD)("div",null,[(0,a.QD)("div",k,[C,o.countGists?((0,a.Wz)(),(0,a.An)("div",A,[(0,a.QD)("span",z,(0,v.WA)(o.countGists),1)])):(0,a.g1)("",!0)]),(0,a.QD)("div",E,[(0,a.oF)(t.$slots,"customButtons",{},void 0,!0)])]),(0,a.QD)("ul",null,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.gists,(t=>((0,a.Wz)(),(0,a.An)("li",{key:t.id},[(0,a.QD)("div",x,[(0,a.QD)("div",W,[(0,a.K2)(l,{to:{name:"GistDetail",params:{id:t.id}}},{default:(0,a.Ql)((()=>[(0,a.mY)((0,v.WA)(Object.keys(t.files)[0]||"Untitled"),1)])),_:2},1032,["to"]),(0,a.QD)("p",null,(0,v.WA)(o.formatDate(t.created_at)),1),(0,a.QD)("p",null,(0,v.WA)(t.description||"Untitled"),1)]),(0,a.QD)("div",L,[(0,a.K2)(u,{iconClass:"far fa-file",label:"20",size:"sm"}),(0,a.K2)(u,{iconClass:"far fa-comment",label:"20",size:"sm"}),(0,a.K2)(u,{iconClass:"fa-regular fa-star",label:"20",size:"sm"})])])])))),128))])])]))])}var _=n(8568),I=n(1288);const S=localStorage.getItem("accessToken");async function T(t,e={}){const n=(0,I.Wo)();try{c().setLoading(!0);const n=await fetch(t,e);if(!n.ok)throw new Error("Failed to fetch data");return c().setLoading(!1),204===n.status?null:await n.json()}catch(o){throw c().setLoading(!1),n.error(`Operation failed: ${o.message}`,{position:"top-right",timeout:3e3}),o}}async function j(t){const e="/api/user",n={headers:{Authorization:`token ${t}`}};return await T(e,n)}async function G(t){const e=(new Date).getTime(),n=`/api/gists?timestamp=${e}`,o={headers:{Authorization:`token ${t}`}};return await T(n,o)}async function K(t){const e=(new Date).getTime(),n=`/api/gists/${t}?timestamp=${e}`,o={headers:{Authorization:`token ${S}`}};return await T(n,o)}async function O(t,e){const n=(0,I.Wo)(),o=`/api/gists/${t}`,i={method:"PATCH",headers:{Accept:"application/vnd.github+json",Authorization:`token ${S}`,"Content-Type":"application/json"},body:JSON.stringify({files:e})},a=await T(o,i);return n.success("Edit was successful",{position:"top-right",timeout:3e3}),a}async function B(t){const e=(0,I.Wo)(),n=`/api/gists/${t}`,o={method:"DELETE",headers:{Authorization:`token ${S}`}},i=await T(n,o);return e.success("Delete was successful",{position:"top-right",timeout:3e3}),i}const $=t=>((0,a.ED)("data-v-415c9161"),t=t(),(0,a.ii)(),t),U={class:"flex items-center justify-center min-h-screen"},P=$((()=>(0,a.QD)("div",{class:"lds-bounce"},[(0,a.QD)("div"),(0,a.QD)("div")],-1))),N=[P];function F(t,e){return(0,a.Wz)(),(0,a.An)("div",U,N)}const J={},V=(0,p.c)(J,[["render",F],["__scopeId","data-v-415c9161"]]);var R=V;function X(t,e,n,o,i,s){return(0,a.Wz)(),(0,a.An)("button",{class:(0,v.WN)([o.buttonClasses,"icon-button",n.border?`icon-button--border-${n.color||"default"}`:"",n.color?`icon-button--${n.color}`:"icon-button--default"]),onClick:e[0]||(e[0]=(...t)=>o.handleClick&&o.handleClick(...t))},[(0,a.QD)("i",{class:(0,v.WN)([n.iconClass,o.iconSizeClass])},null,2),n.label?((0,a.Wz)(),(0,a.An)("div",{key:0,class:(0,v.WN)([o.labelSizeClass,"pl-1"])},(0,v.WA)(n.label),3)):(0,a.g1)("",!0)],2)}var q={name:"IconButton",props:{iconClass:String,label:String,count:Number,onClick:Function,size:{type:String,default:"md"},border:{type:Boolean,default:!1},color:{type:String,default:"default"}},setup(t){const e=()=>{t.onClick&&t.onClick()},n=(0,a.S6)((()=>["icon-button","sm"===t.size&&"text-sm","md"===t.size&&"text-base","lg"===t.size&&"text-lg"])),o=(0,a.S6)((()=>"icon-"+t.size)),i=(0,a.S6)((()=>"label-"+t.size));return{handleClick:e,buttonClasses:n,iconSizeClass:o,labelSizeClass:i}}};const M=(0,p.c)(q,[["render",X],["__scopeId","data-v-2b8dd911"]]);var H=M;const Y={class:"topBar px-12 py-5 border-b-2 flex items-center justify-between"},Z={class:"text-start"},tt={class:""},et={class:"actions"};function nt(t,e,n,o,i,s){const r=(0,a.E1)("router-link");return(0,a.Wz)(),(0,a.An)("div",Y,[(0,a.QD)("h1",Z,[(0,a.K2)(r,{to:"/",class:"topBar_name"},{default:(0,a.Ql)((()=>[(0,a.mY)((0,v.WA)(o.userData.login),1)])),_:1})]),(0,a.QD)("div",tt,[(0,a.QD)("div",et,[(0,a.oF)(t.$slots,"customButtons",{},void 0,!0)])])])}var ot={props:{pageTitle:String,count:Number},setup(){const t=c(),e=(0,a.S6)((()=>t.getUserData));return{userData:e}}};const it=(0,p.c)(ot,[["render",nt],["__scopeId","data-v-62bd343a"]]);var at=it,st={name:"GistList",components:{PageLoader:R,IconButton:H,TopBar:at},setup(){const t=c(),e=(0,_.IL)([]),n=(0,_.IL)(0),o=(0,a.S6)((()=>t.isLoading)),i=(0,a.S6)((()=>t.getUserData));(0,a.u2)((async()=>{try{const o=t.accessToken;if(!o)return;const i=await j(o),a=await G(o);t.setUserData(i),e.value=a,n.value=a.length}catch(o){console.error("Error fetching user Gists:",o)}}));const s=t=>Object.keys(t).join(", "),r=t=>{const e=new Date,n=new Date(t),o=e.getTime()-n.getTime(),i=o/36e5;if(i<24)return`Created ${Math.round(i)} hours ago`;if(i>48)return"Created yesterday";{const t={year:"numeric",month:"short",day:"numeric"};return n.toLocaleDateString(void 0,t)}};return{gists:e,userData:i,countGists:n,getFileNames:s,formatDate:r,isLoading:o}}};const rt=(0,p.c)(st,[["render",Q],["__scopeId","data-v-abc25492"]]);var ct=rt;const lt=t=>((0,a.ED)("data-v-69bd7f25"),t=t(),(0,a.ii)(),t),ut=lt((()=>(0,a.QD)("h1",null,"Login",-1)));function dt(t,e,n,o,i,s){return(0,a.Wz)(),(0,a.An)("div",null,[ut,(0,a.QD)("button",{onClick:e[0]||(e[0]=(...t)=>o.login&&o.login(...t))},"Login with GitHub")])}var ft={name:"LoginPage",setup(){const t=c(),e=(0,f.KX)();t.isAuthenticated&&e.push("/");const n="d9e20d499a3894452cdd",o=()=>{window.location.href=`https://github.com/login/oauth/authorize?client_id=${n}&scope=user,gist`};return{login:o}}};const gt=(0,p.c)(ft,[["render",dt],["__scopeId","data-v-69bd7f25"]]);var pt=gt;const mt=t=>((0,a.ED)("data-v-303f9824"),t=t(),(0,a.ii)(),t),ht={key:0},vt={key:1},bt={key:0,class:"container mx-auto md:px-20 md:py-8 px-10 py-4"},yt={class:"inline-block sm:block"},Dt={class:"inline-block pr-7"},wt={class:"mt-5"},kt={class:"gist-file__header flex justify-between items-center h-12 px-5 py-1"},Ct=mt((()=>(0,a.QD)("i",{class:"fa-solid fa-code text-xs"},null,-1))),At={class:"ml-2 text-s"},zt=["href"],Et={class:"gist-file__content p-5"};function xt(t,e,n,o,i,s){const r=(0,a.E1)("PageLoader"),c=(0,a.E1)("TopBar"),l=(0,a.E1)("IconButton"),u=(0,a.E1)("ConfirmationDialog");return(0,a.Wz)(),(0,a.An)("div",null,[o.isLoading?((0,a.Wz)(),(0,a.An)("div",ht,[(0,a.K2)(r)])):((0,a.Wz)(),(0,a.An)("div",vt,[(0,a.K2)(c,{"page-title":"Gist Detail"}),o.gist?((0,a.Wz)(),(0,a.An)("div",bt,[(0,a.QD)("div",yt,[(0,a.QD)("h2",Dt,(0,v.WA)(o.gist.description||"Untitled"),1),(0,a.K2)(l,{"icon-class":"fa-regular fa-trash-can",label:"Remove",size:"sm",color:"yellow",class:"float-right ml-2 min-w-[80px]",border:!0,onClick:o.showConfirmationDialog},null,8,["onClick"]),(0,a.K2)(l,{"icon-class":"fa-regular fa-pen-to-square",label:"Edit",size:"sm",color:"yellow",class:"float-right min-w-[80px]",border:!0,onClick:o.editGist},null,8,["onClick"]),(0,a.K2)(u,{"is-visible":o.isConfirmationDialogVisible,onConfirm:o.onRemoveGist,onCancel:o.hideConfirmationDialog},null,8,["is-visible","onConfirm","onCancel"])]),(0,a.QD)("ul",wt,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.gist.files,((t,e)=>((0,a.Wz)(),(0,a.An)("li",{key:e,class:"mb-3 gist-file"},[(0,a.QD)("div",kt,[Ct,(0,a.QD)("span",At,(0,v.WA)(e),1),(0,a.QD)("a",{href:t.raw_url,target:"_blank",class:"float-right"},"raw",8,zt)]),(0,a.QD)("div",Et,[(0,a.QD)("pre",null,(0,v.WA)(t.content),1)])])))),128))])])):(0,a.g1)("",!0)]))])}const Wt=t=>{const e=new Date(t);return e.toLocaleDateString()},Lt=t=>((0,a.ED)("data-v-4746660e"),t=t(),(0,a.ii)(),t),Qt={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},_t={class:"bg-white p-8 rounded-lg"},It=Lt((()=>(0,a.QD)("h2",{class:"text-lg font-semibold mb-4"}," Are you sure you want to delete this gist? ",-1))),St={class:"flex justify-end"};function Tt(t,e,n,o,i,s){return n.isVisible?((0,a.Wz)(),(0,a.An)("div",Qt,[(0,a.QD)("div",_t,[It,(0,a.QD)("div",St,[(0,a.QD)("button",{class:"bg-red-500 text-white px-4 py-2 rounded mr-2",onClick:e[0]||(e[0]=(...t)=>o.confirm&&o.confirm(...t))}," Delete "),(0,a.QD)("button",{class:"bg-gray-300 text-gray-800 px-4 py-2 rounded",onClick:e[1]||(e[1]=(...t)=>o.cancel&&o.cancel(...t))}," Cancel ")])])])):(0,a.g1)("",!0)}var jt={props:{isVisible:{type:Boolean,default:!1}},setup(t,{emit:e}){const n=()=>{e("confirm")},o=()=>{e("cancel")};return{confirm:n,cancel:o}}};const Gt=(0,p.c)(jt,[["render",Tt],["__scopeId","data-v-4746660e"]]);var Kt=Gt,Ot={name:"GistDetail",components:{PageLoader:R,TopBar:at,IconButton:H,ConfirmationDialog:Kt},setup(){const t=(0,f.MJ)(),e=(0,f.KX)(),n=c(),o=(0,_.IL)(null),i=(0,_.IL)(!1),s=(0,a.S6)((()=>n.isLoading)),r=t.params.id,l=(0,_.IL)(!1);(0,a.u2)((async()=>{try{const t=n.accessToken;if(!t)return;const e=await K(r);o.value=e}catch(t){console.error("Error fetching user Gist Detail:",t)}}));const u=t=>Object.keys(t).join(", "),d=()=>{i.value=!1},g=()=>{e.push({name:"EditGist",params:{id:r}})},p=()=>{l.value=!0},m=()=>{l.value=!1},h=async()=>{try{await B(r);e.push("/")}catch(t){m(),console.error("Error deleting Gist",t)}};return{gist:o,getFileNames:u,formatDate:Wt,isEditing:i,editGist:g,cancelEdit:d,isLoading:s,isConfirmationDialogVisible:l,showConfirmationDialog:p,hideConfirmationDialog:m,onRemoveGist:h}}};const Bt=(0,p.c)(Ot,[["render",xt],["__scopeId","data-v-303f9824"]]);var $t=Bt;const Ut={key:0},Pt={key:1},Nt={key:0,class:"container mx-auto md:px-20 md:py-8 px-10 py-4"},Ft={class:"inline-block w-full sm:w-1/2 pr-7"},Jt={class:"mt-5"};function Vt(t,e,n,o,i,s){const r=(0,a.E1)("PageLoader"),c=(0,a.E1)("TopBar"),l=(0,a.E1)("IconButton"),u=(0,a.E1)("CodeEditor");return(0,a.Wz)(),(0,a.An)("div",null,[o.isLoading?((0,a.Wz)(),(0,a.An)("div",Ut,[(0,a.K2)(r)])):((0,a.Wz)(),(0,a.An)("div",Pt,[(0,a.K2)(c,{"page-title":"Edit Gist"}),o.gist?((0,a.Wz)(),(0,a.An)("div",Nt,[(0,a.QD)("h2",Ft,"Editing "+(0,v.WA)(o.gist.description||"Untitled"),1),(0,a.K2)(l,{"icon-class":"fa-regular fa-floppy-disk",label:"Save",size:"sm",color:"yellow",class:"float-right min-w-[80px]",border:!0,onClick:o.saveChanges},null,8,["onClick"]),(0,a.QD)("ul",Jt,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(o.gist.files,((t,e)=>((0,a.Wz)(),(0,a.Az)(u,{key:e,filename:e,content:t.content,language:t.language,onUpdateContent:n=>o.handleUpdateContent(t,e,n)},null,8,["filename","content","language","onUpdateContent"])))),128))])])):(0,a.g1)("",!0)]))])}function Rt(t,e,n,o,i,s){const r=(0,a.E1)("v-ace-editor");return(0,a.Wz)(),(0,a.An)("div",null,[(0,a.QD)("p",null,(0,v.WA)(n.filename),1),(0,a.K2)(r,{value:o.editorContent,onInput:o.updateContent,onInit:o.editorInit,mode:o.mode,theme:"chrome",style:{height:"300px"}},null,8,["value","onInput","onInit","mode"])])}var Xt=n(6620),qt={components:{VAceEditor:Xt.o},props:["filename","content","language"],setup(t,{emit:e}){const n=(0,_.IL)(t.content||"a");let o=null;const i=r(t.language),a=t=>{o=t},s=()=>{if(o){const t=o.getValue();e("updateContent",t)}};function r(t){switch(t.toLowerCase()){case"javascript":return"javascript";case"html":return"htmlmixed";case"css":return"css";default:return""}}return{editorContent:n,mode:i,editorInit:a,updateContent:s}}};const Mt=(0,p.c)(qt,[["render",Rt]]);var Ht=Mt,Yt={name:"EditGist",components:{PageLoader:R,TopBar:at,IconButton:H,CodeEditor:Ht},setup(){const t=(0,f.MJ)(),e=(0,f.KX)(),n=c(),o=(0,a.S6)((()=>n.isLoading)),i=(0,_.IL)(null),s=t.params.id;(0,a.u2)((async()=>{try{const t=await K(s);i.value=t}catch(t){console.error("Error fetching user Gist Detail:",t)}}));const r=async()=>{try{await O(s,i.value.files);e.push({name:"GistDetail",params:{id:s}})}catch(t){console.error("Error saving changes:",t)}},l=(t,e,n)=>{i.value&&i.value.files&&i.value.files[e]&&(i.value.files[e].content=n)};return{gist:i,isLoading:o,formatDate:Wt,saveChanges:r,handleUpdateContent:l}}};const Zt=(0,p.c)(Yt,[["render",Vt]]);var te=Zt;const ee=[{path:"/",name:"GistList",component:ct,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:pt},{path:"/gist/:id",name:"GistDetail",component:$t},{path:"/gist/:id/edit",name:"EditGist",component:te}],ne=(0,f.gv)({history:(0,f.oz)(),routes:ee});ne.beforeEach(((t,e,n)=>{const o=c();t.matched.some((t=>t.meta.requiresAuth))?o.isAuthenticated?n():n("/login"):n()}));var oe=ne;n(7144);const ie=(0,i.Kw)(),ae=(0,o.W0)(h);ae.use(ie),ae.use(oe),ae.use(I.cp),ae.mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,function(){n.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var t=[];n.O=function(e,o,i,a){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],a=t[u][2];for(var r=!0,c=0;c<o.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(r=!1,a<s&&(s=a));if(r){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,i,a]}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,a,s=o[0],r=o[1],c=o[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(c)var u=c(n)}for(e&&e(o);l<s.length;l++)a=s[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},o=self["webpackChunkgithub_gists_manager"]=self["webpackChunkgithub_gists_manager"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[999],(function(){return n(2192)}));o=n.O(o)})();
//# sourceMappingURL=app.86ab0807.js.map